{"version":3,"file":"static/js/281.63c2c088.chunk.js","mappings":"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","sources":["workers/query.worker.js","../webpack/bootstrap","../webpack/runtime/chunk loaded","../webpack/runtime/compat get default export","../webpack/runtime/define property getters","../webpack/runtime/ensure chunk","../webpack/runtime/get javascript chunk filename","../webpack/runtime/get mini-css chunk filename","../webpack/runtime/hasOwnProperty shorthand","../webpack/runtime/publicPath","../webpack/runtime/importScripts chunk loading","../webpack/runtime/startup chunk dependencies","../webpack/startup"],"sourcesContent":["import * as csvs from '@fetsorn/csvs-js'\n\nconst fetchDataMetadir = (path) => new Promise((res, rej) => {\n  // console.log(\"csvs invokes callback\")\n\n  const channel = new MessageChannel();\n\n  channel.port1.onmessage = ({data}) => {\n    channel.port1.close();\n    if (data.error) {\n      // console.log(\"query worker receives error\", data.error)\n      rej(data.error);\n    } else {\n      // console.log(\"query worker receives fetch\", data.result)\n      res(data.result);\n    }\n  };\n\n  // console.log(\"query worker asks main thread to fetch\")\n  postMessage({action: \"fetch\", path}, [channel.port2]);\n});\n\nasync function _queryMetadir(message) {\n  try {\n    console.log(\"query worker tries to query metadir\", message.data.search)\n    var result\n    try {\n      // console.log(\"query worker calls to csvs\")\n      let searchParams = new URLSearchParams(message.data.search)\n      result = await (await csvs).queryMetadir(searchParams,\n                                               {fetch: fetchDataMetadir},\n                                               true)\n      // console.log(\"csvs completes\")\n    } catch(e) {\n      console.log(\"csvs.queryMetadir fails\", e)\n      result = []\n    }\n    // console.log(\"query worker returns query\")\n    message.ports[0].postMessage({result})\n  } catch(e) {\n    console.log(\"query worker errors\", e)\n    message.ports[0].postMessage({error: e});\n  }\n}\n\n// group events in data by prop_label\nfunction buildLine(data, prop_label) {\n\n  // { \"YYYY-MM-DD\": [event1, event2, event3] }\n  var object_of_arrays = data.reduce((acc, item) => {\n    let prop_value = item[prop_label]\n    acc[prop_value] = acc[prop_value] || []\n    acc[prop_value].push(item)\n    return acc\n  }, {})\n\n  // console.log(object_of_arrays)\n\n  // [ {\"date\": \"YYYY-MM-DD\",\"events\": [event1, event2, event3]} ]\n  var array_of_objects = Object.keys(object_of_arrays).sort()\n                               .map((key) => {return {date: key,\n                                                      events: object_of_arrays[key]}})\n\n  // console.log(array_of_objects)\n\n  return array_of_objects\n}\n\nasync function _buildLine(message) {\n  try {\n    console.log(\"query worker tries to build line\", message.data.prop_label)\n    var result\n    try {\n      result = buildLine(message.data.data, message.data.prop_label)\n      // console.log(\"csvs completes\")\n    } catch(e) {\n      console.log(\"buildLine fails\", e)\n      result = []\n    }\n    // console.log(\"query worker returns query\")\n    message.ports[0].postMessage({result})\n  } catch(e) {\n    console.log(\"query worker errors\", e)\n    message.ports[0].postMessage({error: e});\n  }\n}\n\nonmessage = async (message) => {\n  // console.log(\"query worker received message\", message)\n  if (message.data.action === \"query\") {\n    await _queryMetadir(message)\n  } else if (message.data.action === \"build\") {\n    await _buildLine(message)\n  }\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n// the startup function\n__webpack_require__.x = function() {\n\t// Load entry module and return exports\n\t// This entry module depends on other loaded chunks and execution need to be delayed\n\tvar __webpack_exports__ = __webpack_require__.O(undefined, [50], function() { return __webpack_require__(3281); })\n\t__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n\treturn __webpack_exports__;\n};\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = function(chunkId) {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce(function(promises, key) {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks and sibling chunks for the entrypoint\n__webpack_require__.u = function(chunkId) {\n\t// return url for filenames based on template\n\treturn \"static/js/\" + chunkId + \".\" + \"52601a8d\" + \".chunk.js\";\n};","// This function allow to reference async chunks and sibling chunks for the entrypoint\n__webpack_require__.miniCssF = function(chunkId) {\n\t// return url for filenames based on template\n\treturn undefined;\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","__webpack_require__.p = \"/csvs-ui/\";","// no baseURI\n\n// object to store loaded chunks\n// \"1\" means \"already loaded\"\nvar installedChunks = {\n\t281: 1\n};\n\n// importScripts chunk loading\nvar installChunk = function(data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\tfor(var moduleId in moreModules) {\n\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t}\n\t}\n\tif(runtime) runtime(__webpack_require__);\n\twhile(chunkIds.length)\n\t\tinstalledChunks[chunkIds.pop()] = 1;\n\tparentChunkLoadingFunction(data);\n};\n__webpack_require__.f.i = function(chunkId, promises) {\n\t// \"1\" is the signal for \"already loaded\"\n\tif(!installedChunks[chunkId]) {\n\t\tif(true) { // all chunks have JS\n\t\t\timportScripts(__webpack_require__.p + __webpack_require__.u(chunkId));\n\t\t}\n\t}\n};\n\nvar chunkLoadingGlobal = self[\"webpackChunktimeline_frontend\"] = self[\"webpackChunktimeline_frontend\"] || [];\nvar parentChunkLoadingFunction = chunkLoadingGlobal.push.bind(chunkLoadingGlobal);\nchunkLoadingGlobal.push = installChunk;\n\n// no HMR\n\n// no HMR manifest","var next = __webpack_require__.x;\n__webpack_require__.x = function() {\n\treturn __webpack_require__.e(50).then(next);\n};","// run startup\nvar __webpack_exports__ = __webpack_require__.x();\n"],"names":["fetchDataMetadir","path","Promise","res","rej","channel","MessageChannel","port1","onmessage","data","close","error","result","postMessage","action","port2","_queryMetadir","message","console","log","search","searchParams","URLSearchParams","csvs","queryMetadir","fetch","ports","buildLine","prop_label","object_of_arrays","reduce","acc","item","prop_value","push","Object","keys","sort","map","key","date","events","_buildLine","e","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","__webpack_modules__","m","x","__webpack_exports__","O","deferred","chunkIds","fn","priority","notFulfilled","Infinity","i","length","fulfilled","j","every","splice","r","n","getter","__esModule","d","a","definition","o","defineProperty","enumerable","get","f","chunkId","all","promises","u","miniCssF","obj","prop","prototype","hasOwnProperty","call","p","installedChunks","importScripts","chunkLoadingGlobal","self","parentChunkLoadingFunction","bind","moreModules","runtime","pop","next","then"],"sourceRoot":""}